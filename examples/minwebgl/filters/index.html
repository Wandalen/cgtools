<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Filters</title>
  <link data-trunk rel="copy-dir" href="assets/thumbnails/" data-target-path="assets/thumbnails" />
  <link data-trunk rel="css" href="style.css">
  <script data-trunk type="module" src="controls.js"></script>
  <script data-trunk type="module" src="zoom_pan.js"></script>
  <script data-trunk type="module" src="sidebar_toggle.js"></script>
  <script data-trunk type="module" src="bg_removal.js"></script>
</head>

<body>
  <div class="sidebar" id="sidebar">
    <div class="filters-grid" id="filters-grid">
      <!-- Filter cards will be generated here -->
    </div>
  </div>

  <!-- Sidebar Toggle Button -->
  <button class="sidebar-toggle" id="sidebar-toggle">
    <div class="toggle-arrow"></div>
  </button>

  <div class="canvas-container">
    <div id="placeholder-text">Drop image here</div>
    <div id="canvas-wrapper">
      <canvas id="canvas" class="hidden"></canvas>
    </div>
  </div>

  <!-- Zoom/Pan Controls -->
  <div class="zoom-controls">
    <button class="zoom-btn" id="zoom-in" title="Zoom In (Mouse Wheel)">+</button>
    <button class="zoom-btn" id="zoom-reset" title="Reset View (Double Click)">âŠ™</button>
    <button class="zoom-btn" id="zoom-out" title="Zoom Out (Mouse Wheel)">âˆ’</button>
  </div>
  <div class="zoom-info" id="zoom-info">100%</div>

  <!-- Drag and Drop Overlay -->
  <div id="drop-overlay">
    <div class="drop-message">
      ğŸ“¸ Drop your image here
    </div>
  </div>

  <!-- Save Button (SD Card Style) -->
  <button id="save-btn" title="Save filtered image">
    <svg class="save-icon" viewBox="0 0 24 24">
      <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
      <polyline points="17 21 17 13 7 13 7 21" />
      <polyline points="7 3 7 8 15 8" />
    </svg>
    <!-- <span class="sd-label">SAVE</span> -->
  </button>

  <!-- Bottom Controls Bar with Apply/Cancel flanking the sliders -->
  <div class="bottom-controls" id="bottom-controls">
    <button id="cancel-btn" title="Cancel filter">
      <svg class="cancel-icon" viewBox="0 0 24 24">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
    <div class="controls-container" id="controls-container">
      <!-- Dynamic controls will be inserted here -->
    </div>
    <button id="apply-btn" title="Apply filter">
      <svg class="apply-icon" viewBox="0 0 24 24">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    </button>
  </div>

  <!-- Bottom Right Buttons -->
  <input type="file" id="file-input" accept="image/*" />
  <button id="upload-btn" title="Upload image">ğŸ“</button>
  <!-- Remove background button -->
  <button id="bg-remove-btn" title="Remove background (test)">
    <svg class="bg-remove-icon" viewBox="0 0 24 24">
      <!-- Background rectangle with diagonal line (crossed out) - drawn first (bottom layer) -->
      <rect x="3" y="6" width="18" height="12" rx="1" stroke-dasharray="3 2" />
      <line x1="3" y1="18" x2="21" y2="6" stroke-width="2" />
      <!-- Person silhouette on top with solid background to cover the line -->
      <circle cx="12" cy="10" r="2.5" fill="#2d3339" />
      <path d="M8 18c0-2.5 1.8-4.5 4-4.5s4 2 4 4.5" fill="#2d3339" />
      <circle cx="12" cy="10" r="2" fill="currentColor" />
      <path d="M8.5 18c0-2.2 1.6-4 3.5-4s3.5 1.8 3.5 4" fill="currentColor" />
    </svg>
  </button>
  <button id="revert-btn" title="Revert to original image">
    <svg class="revert-icon" viewBox="0 0 24 24" style="transform: scaleX(-1);">
      <polyline points="23 4 23 10 17 10"></polyline>
      <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
    </svg>
  </button>
</body>

</html>
